# ğŸš€ Magento2ä¼˜åŒ–è„šæœ¬ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŸºæœ¬ç”¨æ³•

### 1. æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```bash
./scripts/magento2-optimizer.sh help
```

### 2. æŸ¥çœ‹å½“å‰ç³»ç»ŸçŠ¶æ€
```bash
./scripts/magento2-optimizer.sh status
```

### 3. ğŸ¯ åº”ç”¨ä¼˜åŒ–é…ç½® (ä¸»è¦åŠŸèƒ½)
```bash
./scripts/magento2-optimizer.sh optimize
```

### 4. ğŸ”„ è¿˜åŸåŸå§‹é…ç½®
```bash
./scripts/magento2-optimizer.sh restore
```

## ğŸ”§ è¯¦ç»†è¯´æ˜

### âœ… ä¼˜åŒ–åŠŸèƒ½ (`optimize`)
**ä½œç”¨**: å°†ç³»ç»Ÿé…ç½®ä¼˜åŒ–ä¸ºé€‚åˆMagento2çš„é«˜æ€§èƒ½è®¾ç½®

**ä¼˜åŒ–å†…å®¹**:
- **MySQL**: 20GBç¼“å†²æ± ï¼Œ500è¿æ¥æ•°ï¼ŒInnoDBä¼˜åŒ–
- **PHP-FPM**: 120è¿›ç¨‹ï¼Œ2GBå†…å­˜é™åˆ¶ï¼ŒOPcacheä¼˜åŒ–  
- **Nginx**: FastCGIç¼“å­˜ï¼Œé«˜å¹¶å‘è¿æ¥ä¼˜åŒ–
- **Valkey**: 8GBç¼“å­˜ï¼Œä¼šè¯å­˜å‚¨é…ç½®
- **OpenSearch**: 12GBå †å†…å­˜ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–

**æ‰§è¡Œè¿‡ç¨‹**:
1. è‡ªåŠ¨å¤‡ä»½åŸå§‹é…ç½®æ–‡ä»¶
2. åº”ç”¨ä¼˜åŒ–é…ç½®
3. é‡å¯ç›¸å…³æœåŠ¡
4. æ˜¾ç¤ºä¼˜åŒ–çŠ¶æ€

### ğŸ”„ è¿˜åŸåŠŸèƒ½ (`restore`)
**ä½œç”¨**: å°†æ‰€æœ‰é…ç½®è¿˜åŸåˆ°ä¼˜åŒ–å‰çš„åŸå§‹çŠ¶æ€

**è¿˜åŸå†…å®¹**:
- MySQLé…ç½®æ–‡ä»¶
- PHP-FPMé…ç½®æ–‡ä»¶  
- PHP.inié…ç½®æ–‡ä»¶
- Nginxé…ç½®æ–‡ä»¶
- Valkeyé…ç½®æ–‡ä»¶
- OpenSearché…ç½®æ–‡ä»¶

### ğŸ“Š çŠ¶æ€æŸ¥çœ‹ (`status`)
**ä½œç”¨**: æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„ä¼˜åŒ–çŠ¶æ€

**æ˜¾ç¤ºä¿¡æ¯**:
- MySQL InnoDBç¼“å†²æ± å¤§å°
- PHPå†…å­˜é™åˆ¶
- Nginxå·¥ä½œè¿›ç¨‹è®¾ç½®
- Valkeyæœ€å¤§å†…å­˜
- OpenSearchå †å†…å­˜å¤§å°

## âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹

### ğŸ›¡ï¸ å®‰å…¨å¤‡ä»½
- è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½é…ç½®æ–‡ä»¶åˆ°: `/opt/lemp-backups/magento2-optimizer/`
- å¤‡ä»½æ–‡ä»¶æ ¼å¼: `é…ç½®å.backup.æ—¶é—´æˆ³` å’Œ `é…ç½®å.original`

### â±ï¸ æ‰§è¡Œæ—¶æœº
- **å»ºè®®æ—¶é—´**: ä½æµé‡æ—¶æ®µ (å¦‚å‡Œæ™¨2-4ç‚¹)
- **é¢„è®¡æ—¶é•¿**: 2-5åˆ†é’Ÿ (åŒ…å«æœåŠ¡é‡å¯)
- **å½±å“**: çŸ­æš‚çš„æœåŠ¡ä¸­æ–­

### ğŸ” æ‰§è¡Œå‰æ£€æŸ¥
```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status mysql php8.3-fpm nginx valkey opensearch

# æŸ¥çœ‹å½“å‰é…ç½®çŠ¶æ€
./scripts/magento2-optimizer.sh status
```

## ğŸ“ å®Œæ•´ä½¿ç”¨æµç¨‹

### ğŸš€ é¦–æ¬¡ä¼˜åŒ–æµç¨‹
```bash
# 1. æ£€æŸ¥å½“å‰çŠ¶æ€
./scripts/magento2-optimizer.sh status

# 2. åº”ç”¨ä¼˜åŒ– (è¿™æ˜¯ä¸»è¦æ“ä½œ)
./scripts/magento2-optimizer.sh optimize

# 3. éªŒè¯ä¼˜åŒ–ç»“æœ
./scripts/magento2-optimizer.sh status
```

### ğŸ”„ å¦‚éœ€è¿˜åŸ
```bash
# è¿˜åŸæ‰€æœ‰é…ç½®
./scripts/magento2-optimizer.sh restore

# éªŒè¯è¿˜åŸç»“æœ
./scripts/magento2-optimizer.sh status
```

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ä¼˜åŒ–å‰ vs ä¼˜åŒ–å
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| é¦–é¡µåŠ è½½ | 3-5ç§’ | 1-2ç§’ | 60%+ |
| äº§å“é¡µé¢ | 4-6ç§’ | 2-3ç§’ | 50%+ |
| æœç´¢å“åº” | 2-4ç§’ | 0.5-1ç§’ | 75%+ |
| å¹¶å‘ç”¨æˆ· | 50-100 | 300-500 | 400%+ |
| æ•°æ®åº“å“åº” | 200-500ms | 50-100ms | 70%+ |

## ğŸ†˜ æ•…éšœæ’é™¤

### å¦‚æœä¼˜åŒ–åå‡ºç°é—®é¢˜
```bash
# ç«‹å³è¿˜åŸé…ç½®
./scripts/magento2-optimizer.sh restore

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status mysql php8.3-fpm nginx valkey opensearch

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/mysql/error.log
tail -f /var/log/php8.3-fpm.log
tail -f /var/log/nginx/error.log
```

### å¸¸è§é—®é¢˜
1. **MySQLå¯åŠ¨å¤±è´¥**: é€šå¸¸æ˜¯å†…å­˜ä¸è¶³ï¼Œæ£€æŸ¥å¯ç”¨å†…å­˜
2. **PHP-FPMé”™è¯¯**: æ£€æŸ¥è¿›ç¨‹æ•°é…ç½®æ˜¯å¦åˆé€‚
3. **OpenSearchå¯åŠ¨å¤±è´¥**: æ£€æŸ¥JVMå†…å­˜è®¾ç½®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨å†…å­˜æ˜¯å¦çœŸçš„æ˜¯64GB
2. æ‰€æœ‰æœåŠ¡æ˜¯å¦æ­£å¸¸å®‰è£…
3. ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³
4. ç³»ç»Ÿæ—¥å¿—: `journalctl -xe`

---

**ğŸ‰ äº«å—Magento2çš„é«˜æ€§èƒ½ä½“éªŒï¼**
